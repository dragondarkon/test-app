{"ast":null,"code":"import _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nimport { compose } from 'recompose';\nimport { connect } from 'react-redux';\nimport Page from '../containers/page';\nimport { addTodo } from '../actions';\nimport fetch from 'isomorphic-unfetch';\nconst IndexPage = compose()(Page);\n\nIndexPage.getInitialProps = async ({\n  store,\n  req\n}) => {\n  const isServer = !!req;\n  const {\n    todo\n  } = store.getState();\n  const res = await fetch('http://localhost:8000/data');\n  const datas = await res.json(); // we can add any custom data here\n  // for examle, the data from api server\n\n  datas.map(data => store.dispatch(addTodo(_Object$assign(todo.item, {\n    value: data.text\n  })))); // datas.map((data) =>  {\n  //   store.dispatch(addTodo(Object.assign(todo, {\n  //     value: data.text,\n  //   })));\n  // })\n\n  store.dispatch(addTodo(_Object$assign(todo.item, {\n    value: 'Hello World'\n  })));\n  return {\n    isServer\n  };\n};\n\nexport default connect()(IndexPage);","map":{"version":3,"sources":["/home/jirayu/project/js/test-app/pages/index.tsx"],"names":["compose","connect","Page","addTodo","fetch","IndexPage","getInitialProps","store","req","isServer","todo","getState","res","datas","json","map","data","dispatch","item","value","text"],"mappings":";AAIA,SAASA,OAAT,QAAwB,WAAxB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,SAASC,OAAT,QAAwB,YAAxB;AAEA,OAAOC,KAAP,MAAkB,oBAAlB;AAMA,MAAMC,SAA8C,GAAGL,OAAO,GAAGE,IAAH,CAA9D;;AAEAG,SAAS,CAACC,eAAV,GAA4B,OAAO;AAAEC,EAAAA,KAAF;AAASC,EAAAA;AAAT,CAAP,KAA0B;AACpD,QAAMC,QAAiB,GAAG,CAAC,CAACD,GAA5B;AACA,QAAM;AAAEE,IAAAA;AAAF,MAAWH,KAAK,CAACI,QAAN,EAAjB;AACA,QAAMC,GAAG,GAAG,MAAMR,KAAK,CAAC,4BAAD,CAAvB;AACA,QAAMS,KAAK,GAAG,MAAMD,GAAG,CAACE,IAAJ,EAApB,CAJoD,CAMpD;AACA;;AACAD,EAAAA,KAAK,CAACE,GAAN,CAAWC,IAAI,IAAIT,KAAK,CAACU,QAAN,CAAed,OAAO,CAAC,eAAcO,IAAI,CAACQ,IAAnB,EAAyB;AAC/DC,IAAAA,KAAK,EAAEH,IAAI,CAACI;AADmD,GAAzB,CAAD,CAAtB,CAAnB,EARoD,CAapD;AACA;AACA;AACA;AACA;;AAEAb,EAAAA,KAAK,CAACU,QAAN,CAAed,OAAO,CAAC,eAAcO,IAAI,CAACQ,IAAnB,EAAyB;AAC9CC,IAAAA,KAAK,EAAE;AADuC,GAAzB,CAAD,CAAtB;AAIA,SAAO;AACLV,IAAAA;AADK,GAAP;AAGD,CA1BD;;AA4BA,eAAeR,OAAO,GAAGI,SAAH,CAAtB","sourcesContent":["import {\n  NextPageContext,\n  NextComponentType,\n} from 'next';\nimport { compose } from 'recompose';\nimport { connect } from 'react-redux';\nimport Page from '../containers/page';\nimport { addTodo } from '../actions';\nimport { Store } from '../store';\nimport fetch from 'isomorphic-unfetch';\n\ninterface IndexPageContext extends NextPageContext {\n  store: Store;\n}\n\nconst IndexPage: NextComponentType<IndexPageContext> = compose()(Page);\n\nIndexPage.getInitialProps = async ({ store, req }) => {\n  const isServer: boolean = !!req;\n  const { todo } = store.getState();\n  const res = await fetch('http://localhost:8000/data');\n  const datas = await res.json();\n\n  // we can add any custom data here\n  // for examle, the data from api server\n  datas.map((data => store.dispatch(addTodo(Object.assign(todo.item, {\n      value: data.text,\n    }))))\n  )\n\n  // datas.map((data) =>  {\n  //   store.dispatch(addTodo(Object.assign(todo, {\n  //     value: data.text,\n  //   })));\n  // })\n  \n  store.dispatch(addTodo(Object.assign(todo.item, {\n    value: 'Hello World',\n  })));\n\n  return {\n    isServer,\n  };\n}\n\nexport default connect()(IndexPage);\n"]},"metadata":{},"sourceType":"module"}